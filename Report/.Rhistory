knitr::opts_chunk$set(echo = TRUE)
if (!require("fs")) install.packages("fs")
library("fs")
rawdatadir=path_wd("..","data")
if(!dir.exists(rawdatadir)) dir.create(rawdatadir,recursive = TRUE)
cnames = read.table(path_wd("..","data","kddcup.names"),
as.is=T, skip=1, sep=":")
download.file('http://kdd.ics.uci.edu/databases/kddcup99/kddcup.data_10_percent.gz', path_wd("..","data","kddcup.data_10_percent.gz"))
download.file('http://kdd.ics.uci.edu/databases/kddcup99/kddcup.testdata.unlabeled_10_percent.gz', path_wd("..","data","kddcup.testdata.unlabeled_10_percent.gz"))
download.file('http://kdd.ics.uci.edu/databases/kddcup99/corrected.gz', path_wd("..","data","corrected.gz"))
download.file('http://kdd.ics.uci.edu/databases/kddcup99/kddcup.names', path_wd("..","data","kddcup.names"))
cnames = read.table(path_wd("..","data","kddcup.names"),
as.is=T, skip=1, sep=":")
kdd_10 = read.csv(path_wd("..","data","kddcup.data_10_percent.gz"))
labeled_test = read.csv(path_wd("..","data","corrected.gz"))
unlabeled_test = read.csv(path_wd("..","data","kddcup.testdata.unlabeled_10_percent.gz"))
datafiles = list(kdd_10, labeled_test, unlabeled_test)
colnames(kdd_10)=c(cnames[,1],"normal")
colnames(labeled_test)=c(cnames[,1],"normal")
colnames(unlabeled_test) = c(cnames[,1])
head(kdd_10)
head(labeled_test)
head(unlabeled_test)
cols.fac <- c(2,3,4,7,12,21,22)
for (file in datafiles) {
sapply(file[,cols.fac],as.factor)
}
v <- 1:41
cols.num <- v[!(v %in% cols.fac)]
for (file in datafiles) {
sapply(file[,cols.num],as.character)
}
for (file in datafiles) {
sapply(file[,cols.num],as.numeric)
}
n = length(kdd_10[,1])
test_sample = sample(1:n, n/10)
kdd_10_train = kdd_10[!(1:n %in% test_sample), ]
kdd_10_test = kdd_10[test_sample,]
dim(kdd_10_test) # 49402 observations
dim(kdd_10_train) # 444618 observations
write.table(kdd_10_train,
path_wd("..","data","kdd_10_train.tab"),
quote=FALSE,row.names=FALSE)
write.table(kdd_10_test,
path_wd("..","data","kdd_10_test.tab"),
quote=FALSE,row.names=FALSE)
write.table(labeled_test,
path_wd("..","data","labeled_test.tab"),
quote=FALSE,row.names=FALSE)
write.table(unlabeled_test,
path_wd("..","data","unlabeled_test.tab"),
quote=FALSE,row.names=FALSE)
